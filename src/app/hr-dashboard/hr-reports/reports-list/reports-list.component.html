<div class="main-wrapper main-reports">

    <div class="user-list-wrapper">

        <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

          <!-- Position Column -->
          <ng-container matColumnDef="reportname">
            <th mat-header-cell *matHeaderCellDef> Reports name </th>
            <td style="white-space: nowrap !important;" class="haderWidth" mat-cell *matCellDef="let element; let i = index;">
              <label *ngIf="i == 0">1st shortlist<span class="asterick">*</span></label>
              <label *ngIf="i == 1">2nd shortlist<span class="asterick">*</span></label>
              <label *ngIf="i == 2">Evaluation feedback</label>
              <!-- <label *ngIf="i == 3">Candidate details</label> -->
              <label *ngIf="i == 3">Interview panel</label>
            </td>
          </ng-container>

          <ng-container matColumnDef="col2">
              <th mat-header-cell *matHeaderCellDef>  &#160;  </th>
              <td mat-cell *matCellDef="let element; let i = index;">
                <!-- <div></div> -->
                <div class="inline-table-flex" *ngIf="i == 0">
                    <nz-select class="input select nzSelect"
                    nzPlaceHolder="Tag name" [(ngModel)]="selectedTagNameFirst" nzAllowClear nzShowSearch>
                      <nz-option nzCustomContent *ngFor="let tag of tagNameDropdown" [nzLabel]="tag.tag_name" [nzValue]="tag.tag_name">
                        <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="tag.tag_name">{{tag.tag_name}}</span>
                      </nz-option>
                  </nz-select>
                  <nz-select nzShowSearch nzAllowClear class="input select nzSelect"
                  nzPlaceHolder="City" [(ngModel)]="selectedCityForFirst">
                    <nz-option nzCustomContent *ngFor="let city of cityListDropdown" [nzLabel]="city.cities" [nzValue]="city.cities">
                      <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="city.cities">{{city.cities}}</span>
                    </nz-option>
                </nz-select>
                <nz-select nzShowSearch nzAllowClear class="input select nzSelect"
                nzPlaceHolder="Institute name" [(ngModel)]="selectedInstituteNameForFirst">
                  <nz-option class="dummy" nzCustomContent *ngFor="let institute of institutesList" [nzLabel]="institute.name" [nzValue]="institute.value">
                    <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="institute.name">{{institute.name}}</span>
                  </nz-option>
              </nz-select>

                </div>

                <!-- <div *ngIf="i == 3">
                    <nz-select class="input select"
                    nzPlaceHolder="Tag name" [(ngModel)]="selectedTagNameSecond">
                      <nz-option *ngFor="let tag of tagNameDropdown" [nzLabel]="tag.tag_name" [nzValue]="tag.tag_name"></nz-option>
                  </nz-select>
                </div> -->

                <div *ngIf="i == 1">
                    <!-- <nz-select class="input select-1"
                    nzPlaceHolder="Assessment name" nzShowSearch nzAllowClear [nzCustomTemplate]="defaultTemplate" [(ngModel)]="selectedAssessmentName" matTooltipPosition="after" matTooltip="{{selectedAssessmentName != undefined? selectedAssessmentName.assesment + ' (' + selectedAssessmentName.date_times + ')' : 'Please select option'}}">
                      <nz-option nzCustomContent *ngFor="let assessment of assessmentNameDropdown" [nzLabel]="assessment.assesment" [nzValue]="assessment">
                        <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="assessment.assesment">{{assessment.assesment}}</span>
                      </nz-option>
                  </nz-select>
                  <ng-template #defaultTemplate let-selected>  {{ selected.nzLabel }} {{selected.nzValue.date_times}} </ng-template> -->
                  <nz-select nzShowSearch nzAllowClear class="input select nzSelect"
                  nzPlaceHolder="Institute name" [(ngModel)]="selectedAssessmentName">
                    <nz-option class="dummy" nzCustomContent *ngFor="let institute of assessmentNameDropdown" [nzLabel]="institute.institute" [nzValue]="institute.institute">
                      <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="institute.name">{{institute.institute}}</span>
                    </nz-option>
                </nz-select>

                </div>
                <div *ngIf="i == 2">
                  <nz-select nzShowSearch nzAllowClear class="input select nzSelect-1"
                  nzPlaceHolder="Institute name" [(ngModel)]="selectedevaluationReportInstitute">
                    <nz-option class="dummy" nzCustomContent *ngFor="let institute of evaluationReportInstitutes" [nzLabel]="institute.institute" [nzValue]="institute.institute">
                      <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="institute.institute">{{institute.institute}}</span>
                    </nz-option>
                </nz-select>

                    <!-- <nz-select class="nzSelect-1"
                    nzPlaceHolder="Assessment name" nzShowSearch nzAllowClear [nzCustomTemplate]="defaultTemplate1" [(ngModel)]="selectedAssessmentNameSecond" matTooltipPosition="after" matTooltip="{{selectedAssessmentNameSecond != undefined? selectedAssessmentNameSecond.assesment + ' (' + selectedAssessmentNameSecond.date_times + ')' : 'Please select option'}}">
                      <nz-option nzCustomContent *ngFor="let assessment of evaluationReportInstitutes" [nzLabel]="assessment.institute" [nzValue]="assessment.institute">
                        <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="assessment.institute">{{assessment.assesment}}</span>
                      </nz-option>
                  </nz-select> -->
                  <!-- <ng-template #defaultTemplate1 let-selected>  {{ selected.nzLabel }} {{selected.nzValue.date_times}} </ng-template> -->
                </div>
              </td>
          </ng-container>
          <ng-container matColumnDef="col3">
              <th mat-header-cell *matHeaderCellDef>&#160;Date from  </th>
              <td mat-cell *matCellDef="let element; let i = index;">
                  <!-- <div *ngIf="i == 0">
                      <nz-select nzShowSearch nzAllowClear class="nzSelect"
                      nzPlaceHolder="City" [(ngModel)]="selectedCityForFirst">
                        <nz-option nzCustomContent *ngFor="let city of cityListDropdown" [nzLabel]="city.cities" [nzValue]="city.cities">
                          <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="city.cities">{{city.cities}}</span>
                        </nz-option>
                    </nz-select>
                  </div> -->
                  <div>
                    <!-- <th mat-header-cell *matHeaderCellDef> Date from </th>
                    <td mat-cell *matCellDef="let element; let i = index;"> -->
                        <div class="input-box">
                            <input matInput [matDatepicker]="dp_i" [(ngModel)]="element.fdate">
                            <mat-datepicker-toggle class="mat-icon-button" matSuffix [for]="dp_i"></mat-datepicker-toggle>
                            <mat-datepicker #dp_i>
                            </mat-datepicker>
                        </div>
                    <!-- </td> -->
                  </div>

                  <!-- <div *ngIf="i == 3">
                    <nz-select class="nzSelect"
                    nzPlaceHolder="City" [(ngModel)]="selectedCityForSecond">
                      <nz-option *ngFor="let city of cityListDropdown" [nzLabel]="city.cities" [nzValue]="city.cities"></nz-option>
                  </nz-select>
                </div> -->

              </td>
          </ng-container>
          <ng-container matColumnDef="col4">
              <th mat-header-cell *matHeaderCellDef> &#160;Date to </th>
              <td mat-cell *matCellDef="let element; let i = index;">
                  <!-- <div *ngIf="i == 0">
                      <nz-select nzShowSearch nzAllowClear class="nzSelect"
                      nzPlaceHolder="Institute name" [(ngModel)]="selectedInstituteNameForFirst">
                        <nz-option class="dummy" nzCustomContent *ngFor="let institute of institutesList" [nzLabel]="institute.name" [nzValue]="institute.value">
                          <span style="padding: 1em 0 !important;"  nz-tooltip [nzTitle]="institute.name">{{institute.name}}</span>
                        </nz-option>
                    </nz-select>
                  </div> -->

                  <div>
                    <div class="input-box">
                      <input  matInput [matDatepicker]="dp_i" [(ngModel)]="element.tdate">
                      <mat-datepicker-toggle class="mat-icon-button" matSuffix [for]="dp_i"></mat-datepicker-toggle>
                      <mat-datepicker #dp_i>
                      </mat-datepicker>
                  </div>
                  </div>
                  <!-- <div *ngIf="i == 3">
                    <nz-select class="nzSelect"
                    nzPlaceHolder="Institute name" [(ngModel)]="selectedInstituteNameForSecond">
                      <nz-option *ngFor="let institute of institutesList" [nzLabel]="institute.name" [nzValue]="institute.value"></nz-option>
                  </nz-select>
                </div> -->

              </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="fdate">
            <th mat-header-cell *matHeaderCellDef> Date from </th>
            <td mat-cell *matCellDef="let element; let i = index;">
                <div class="input-box">
                    <input matInput [matDatepicker]="dp_i" [(ngModel)]="element.fdate">
                    <mat-datepicker-toggle class="mat-icon-button" matSuffix [for]="dp_i"></mat-datepicker-toggle>
                    <mat-datepicker #dp_i>
                    </mat-datepicker>
                </div>
            </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="tdate">
            <th mat-header-cell *matHeaderCellDef> Date to </th>
            <td mat-cell *matCellDef="let element; let i = index;">
                <div class="input-box">
                    <input  matInput [matDatepicker]="dp_i" [(ngModel)]="element.tdate">
                    <mat-datepicker-toggle class="mat-icon-button" matSuffix [for]="dp_i"></mat-datepicker-toggle>
                    <mat-datepicker #dp_i>
                    </mat-datepicker>
                </div>
            </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let element; let i = index;">
                <div>
                    <button (click)="downloadReports(i)" class="table-btn" mat-raised-button>
                        <!-- <span><img src="assets/images/Group4527.svg" width="20px" height="13px" alt="" srcset=""></span> -->
                        <span style="padding: 0 0 0 .25em;"> Download</span>
                    </button>
                </div>

            </td>
          </ng-container>

                <!-- fifth Header row first group -->
      <div [ngClass]="userList && userList.length === 0 ? '' : 'hide'" matColumnDef="fifth-header-row-first-group">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="10">
            {{'No Data Available'}}
          </th>
        </div>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr class="no-data-available" [ngClass]="userList && userList.length === 0 ? '' : 'hide'" mat-header-row
          *matHeaderRowDef="['fifth-header-row-first-group']">
        </tr>
        <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns;" [ngClass]="i % 2 == 0 ? 'light-bg' : 'dark-bg'"></tr>
      </table>
    </div>

  </div>



