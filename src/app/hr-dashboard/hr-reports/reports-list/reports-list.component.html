<div class="main-wrapper">

    <div class="user-list-wrapper">

        <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

          <!-- Position Column -->
          <ng-container matColumnDef="reportname">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Reports name </th>
            <td class="haderWidth" mat-cell *matCellDef="let element; let i = index;">
              <label *ngIf="i == 0">1st shortlist</label>
              <label *ngIf="i == 1">2nd shortlist</label>
              <label *ngIf="i == 2">3rd shortlist</label>
              <label *ngIf="i == 3">Candidate details</label>
              <label *ngIf="i == 4">Interview panel</label>
            </td>
          </ng-container>

          <ng-container matColumnDef="col2">
              <th mat-header-cell *matHeaderCellDef>  &#160;  </th>
              <td mat-cell *matCellDef="let element; let i = index;">
                <div *ngIf="i == 0 || i == 3">
                    <nz-select class="nzSelect"
                    nzPlaceHolder="Tag name">
                      <nz-option *ngFor="let tag of tagNameDropdown" [nzLabel]="tag.tag_name" [nzValue]="tag.tag_name"></nz-option>
                  </nz-select>
                </div>

                <div *ngIf="i == 1">
                    <nz-select class="nzSelect-1"
                    nzPlaceHolder="Assessment name" nzShowSearch [nzCustomTemplate]="defaultTemplate" [(ngModel)]="selectedAssessmentName" matTooltipPosition="after" matTooltip="{{selectedAssessmentName != undefine? selectedAssessmentName.assesment + ' (' + selectedAssessmentName.date_times + ')' : 'Please select option'}}">
                      <nz-option *ngFor="let assessment of assessmentNameDropdown" [nzLabel]="assessment.assesment" [nzValue]="assessment"></nz-option>
                  </nz-select>
                  <ng-template #defaultTemplate let-selected>  {{ selected.nzLabel }} {{selected.nzValue.date_times}} </ng-template>
                </div>
                <div *ngIf="i == 2">
                    <nz-select class="nzSelect-1"
                    nzPlaceHolder="Assessment name" nzShowSearch [nzCustomTemplate]="defaultTemplate1" [(ngModel)]="selectedAssessmentNameSecond" matTooltipPosition="after" matTooltip="{{selectedAssessmentNameSecond != undefine? selectedAssessmentNameSecond.assesment + ' (' + selectedAssessmentNameSecond.date_times + ')' : 'Please select option'}}">
                      <nz-option *ngFor="let assessment of assessmentNameDropdown" [nzLabel]="assessment.assesment" [nzValue]="assessment"></nz-option>
                  </nz-select>
                  <ng-template #defaultTemplate1 let-selected>  {{ selected.nzLabel }} {{selected.nzValue.date_times}} </ng-template>
                </div>
              </td>
          </ng-container>
          <ng-container matColumnDef="col3">
              <th mat-header-cell *matHeaderCellDef>&#160;  </th>
              <td mat-cell *matCellDef="let element; let i = index;">
                  <div *ngIf="i == 0 || i == 3">
                      <nz-select class="nzSelect"
                      nzPlaceHolder="City">
                        <nz-option *ngFor="let city of cityListDropdown" [nzLabel]="city.cities" [nzValue]="city.cities"></nz-option>
                    </nz-select>
                  </div>
                  <!-- <div class="input-box" *ngIf="i == 2">
                    <input matInput type="text" placeholder="Date" required>
                </div> -->
              </td>
          </ng-container>
          <ng-container matColumnDef="col4">
              <th mat-header-cell *matHeaderCellDef> &#160; </th>
              <td mat-cell *matCellDef="let element; let i = index;">
                  <div *ngIf="i == 0 || i == 3">
                      <nz-select class="nzSelect"
                      nzPlaceHolder="Institute name">
                        <nz-option *ngFor="let institute of institutesList" [nzLabel]="institute.name" [nzValue]="institute.value"></nz-option>
                    </nz-select>
                  </div>
                  <!-- <div class="input-box" *ngIf="i == 2">
                    <input matInput type="text" placeholder="Time" required>
                </div> -->
              </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="fdate">
            <th mat-header-cell *matHeaderCellDef> Date from </th>
            <td mat-cell *matCellDef="let element; let i = index;">
                <div class="input-box">
                    <input matInput [matDatepicker]="dp_i" [(ngModel)]="element.fdate">
                    <mat-datepicker-toggle class="mat-icon-button" matSuffix [for]="dp_i"></mat-datepicker-toggle>
                    <mat-datepicker #dp_i>
                    </mat-datepicker>
                </div>
            </td>
          </ng-container>

          <!-- Weight Column -->
          <ng-container matColumnDef="tdate">
            <th mat-header-cell *matHeaderCellDef> Date to </th>
            <td mat-cell *matCellDef="let element; let i = index;">
                <div class="input-box">
                    <input  matInput [matDatepicker]="dp_i" [(ngModel)]="element.tdate">
                    <mat-datepicker-toggle class="mat-icon-button" matSuffix [for]="dp_i"></mat-datepicker-toggle>
                    <mat-datepicker #dp_i>
                    </mat-datepicker>
                </div>
            </td>
          </ng-container>

          <!-- Symbol Column -->
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>
            <td mat-cell *matCellDef="let element; let i = index;">
                <div>
                    <button (click)="downloadReports(i)" class="download" mat-raised-button>
                        <span><img src="assets/images/Group4527.svg" width="20px" height="13px" alt="" srcset=""></span>
                        <span style="padding: 0 0 0 .25em;"> Download</span>
                    </button>
                </div>

            </td>
          </ng-container>

                <!-- fifth Header row first group -->
      <div [ngClass]="userList && userList.length === 0 ? '' : 'hide'" matColumnDef="fifth-header-row-first-group">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="10">
            {{'No Data Available'}}
          </th>
        </div>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr class="no-data-available" [ngClass]="userList && userList.length === 0 ? '' : 'hide'" mat-header-row
          *matHeaderRowDef="['fifth-header-row-first-group']">
        </tr>
        <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns;" [ngClass]="i % 2 == 0 ? 'light-bg' : 'dark-bg'"></tr>
      </table>
    </div>

  </div>



