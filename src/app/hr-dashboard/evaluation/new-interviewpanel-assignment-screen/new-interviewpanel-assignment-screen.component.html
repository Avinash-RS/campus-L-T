<div class="new-inv-particular-assessment-candidate">
  <div class="button-wrapper">
    <button
      class="submit"
      [ngClass]="
        userList && userList.length > 0 && userListHR && userListHR.length > 0
          ? ''
          : 'disabled'
      "
      (click)="scheduleInterview()"
      mat-raised-button
    >
      Schedule
    </button>
  </div>
  <div>
    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title> Filter </mat-panel-title>
          <mat-panel-description> </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="top-wrapper">
          <div class="heading4">
            Filters
            <div class="btngroup">
              <span [class.active]="!fltractive" (click)="togglefltr()"
                >Candidate</span
              >
              <span [class.active]="fltractive" (click)="togglefltr()"
                >Interview</span
              >
            </div>
          </div>
          <div class="left" *ngIf="!fltractive">
            <div class="flex-wrap">
              <div class="label">
                Institute name<span class="asterick">*</span>
              </div>
              <div class="input-box">
                <nz-select
                  class="nzSelect-revamp"
                  [(ngModel)]="selectedInstitute"
                  (ngModelChange)="
                    instituteChangeForDiscipline(selectedInstitute)
                  "
                  nzAllowClear
                  nzShowSearch
                  nzPlaceHolder="--Select Institute name--"
                >
                  <nz-option
                    *ngFor="let level of allInstitutes"
                    [nzLabel]="level.institute_name"
                    [nzValue]="level.institute_name"
                  ></nz-option>
                </nz-select>
              </div>
            </div>
            <div class="flex-wrap">
              <div class="label">Discipline</div>
              <div
                [matTooltip]="selectedInstitute ? '' : 'Select Institute name'"
                class="input-box"
              >
                <nz-select
                  [ngClass]="selectedInstitute ? '' : 'disabled'"
                  class="nzSelect-revamp"
                  [(ngModel)]="selectedDiscipline"
                  (ngModelChange)="instituteChange()"
                  nzAllowClear
                  nzShowSearch
                  nzPlaceHolder="All"
                >
                  <nz-option
                    *ngFor="let level of allDisciplines"
                    [nzLabel]="level.discipline"
                    [nzValue]="level.discipline"
                  >
                  </nz-option>
                </nz-select>
              </div>
            </div>
            <div class="flex-wrap">
              <div class="label">Education level</div>
              <div class="input-box">
                <nz-select
                  class="nzSelect-revamp"
                  [(ngModel)]="selectedEdu"
                  (ngModelChange)="instituteChange()"
                  nzAllowClear
                  nzShowSearch
                  nzPlaceHolder="All"
                >
                  <nz-option
                    *ngFor="let level of allEducations"
                    [nzLabel]="level.label"
                    [nzValue]="level.name"
                  >
                  </nz-option>
                </nz-select>
              </div>
            </div>
            <div class="flex-wrap">
              <div class="label">Assessment</div>
              <div
                [matTooltip]="selectedInstitute ? '' : 'Select Institute name'"
                class="input-box"
              >
                <nz-select
                  class="nzSelect-revamp"
                  [ngClass]="selectedInstitute ? '' : 'disabled'"
                  [(ngModel)]="selectedAssessment"
                  (ngModelChange)="instituteChange()"
                  nzAllowClear
                  nzShowSearch
                  nzPlaceHolder="All"
                >
                  <nz-option
                    *ngFor="let level of allAssessments"
                    [nzLabel]="level.assement_name"
                    [nzValue]="level.assement_name"
                  ></nz-option>
                </nz-select>
              </div>
            </div>
            <div class="flex-wrap">
              <div class="label">Status<span class="asterick">*</span></div>
              <div class="input-box">
                <nz-select
                  class="nzSelect-revamp"
                  [(ngModel)]="selectedStatus"
                  (ngModelChange)="instituteChange()"
                  nzAllowClear
                  nzShowSearch
                  nzPlaceHolder="--Select Status--"
                >
                  <nz-option
                    *ngFor="let level of statusList"
                    [nzLabel]="level.name"
                    [nzValue]="level.value"
                  >
                  </nz-option>
                </nz-select>
              </div>
            </div>
            <div class="flex-wrap applybtn">
              <div class="input-box">
                <div style="display: flex; justify-content: center">
                  <button
                    [disabled]="
                      selectedInstitute && selectedStatus ? false : true
                    "
                    class="submit"
                    (click)="go()"
                    mat-raised-button
                  >
                    Apply
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="right" *ngIf="fltractive">
            <div class="flex-wrap">
              <div class="label">Interview panel discipline</div>
              <div class="input-box">
                <nz-select
                  class="nzSelect-revamp"
                  [(ngModel)]="selectedHRDiscipline"
                  (ngModelChange)="hrDiciplineChange(selectedHRDiscipline)"
                  nzAllowClear
                  nzShowSearch
                  nzPlaceHolder="All"
                >
                  <nz-option
                    *ngFor="let level of allHRDisciplines"
                    [nzLabel]="level.discipline_name"
                    [nzValue]="level.discipline_name"
                  ></nz-option>
                </nz-select>
              </div>
              <div class="input-box">
                <button
                  class="submit"
                  (click)="HRgo(selectedHRDiscipline)"
                  mat-raised-button
                >
                  Apply
                </button>
              </div>
            </div>
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="user-list-wrapper">
    <div class="total-wrap" #scrollbox>
      <div class="lefttable">
        <div class="head-flex">
          <div class="text">Candidates list</div>
          <div class="search-bar">
            <div class="search-icon">
              <img src="assets/images/feather-search.svg" alt="" srcset="" />
              <input
                matInput
                (keyup)="onQuickFilterChanged()"
                [(ngModel)]="quickSearchValue"
                placeholder="Search…."
              />
            </div>
          </div>
        </div>
        <div [ngClass]="userList && userList.length > 0 ? 'scroll' : 'scroll1'">
          <ag-grid-angular
            style="width: 99%; height: 450px; margin: auto !important"
            class="ag-theme-alpine"
            [rowData]="rowData"
            [columnDefs]="columnDefs"
            [defaultColDef]="defaultColDef"
            [pagination]="true"
            [suppressRowClickSelection]="true"
            [paginationPageSize]="paginationPageSize"
            [rowSelection]="'multiple'"
            [cacheBlockSize]="cacheBlockSize"
            (gridReady)="onGridReady($event)"
            (sortChanged)="sortevent($event)"
            (cellClicked)="onCellClicked($event)"
            (filterModified)="getModel($event)"
            headerHeight="40"
            (selectionChanged)="onCandidateSelect($event)"
            [animateRows]="true"
          >
          </ag-grid-angular>
        </div>
      </div>

      <!-- second table -->
      <div class="righttable">
        <div class="head-flex">
          <div class="text">Interview Panel list</div>
          <div class="search-bar">
            <div class="search-icon">
              <img src="assets/images/feather-search.svg" alt="" srcset="" />
              <input
                matInput
                (keyup)="onQuickFilterChangedHR()"
                [(ngModel)]="quickSearchValueHR"
                placeholder="Search…."
              />
            </div>
          </div>
        </div>
        <div
          [ngClass]="userListHR && userListHR.length > 0 ? 'scroll' : 'scroll1'"
        >
          <ag-grid-angular
            style="width: 99%; height: 450px; margin: auto !important"
            class="ag-theme-alpine"
            [rowData]="rowDataHR"
            [columnDefs]="columnDefsHR"
            [defaultColDef]="defaultColDefHR"
            [pagination]="true"
            [suppressRowClickSelection]="true"
            [paginationPageSize]="paginationPageSizeHR"
            [rowSelection]="'multiple'"
            [cacheBlockSize]="cacheBlockSizeHR"
            (gridReady)="onGridReadyHR($event)"
            (sortChanged)="sorteventHR($event)"
            (cellClicked)="onCellClickedHR($event)"
            (filterModified)="getModelHR($event)"
            headerHeight="40"
            (selectionChanged)="onInterviewerSelect($event)"
            [animateRows]="true"
          >
          </ag-grid-angular>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #schedulePopup>
  <div class="schedule-container">
    <div class="pop-up-header">
      <span>Create a New Room</span>
      <span
        (click)="closePopup()"
        class="material-icons"
        style="float: right; cursor: pointer"
        >close</span
      >
    </div>
    <form [formGroup]="scheduleForm">
    <div class="input-container">
      <div class="radiogroup">
        <mat-radio-group [formControlName]="'type'" aria-label="Select an option">
          <mat-radio-button value="1"
            >WEBRTC</mat-radio-button
          >
          <mat-radio-button value="2">Microsoft Teams</mat-radio-button>
        </mat-radio-group>
      </div>
    </div>
    <div class="input-container">
      <div class="header-label">Room Title<span class="asterick">*</span></div>
      <div class="w-100">
        <input class="input" matInput placeholder="Enter here..." [formControlName]="'title'" />
        <div class="form-error"
        *ngIf="title?.invalid && title?.touched">
        <div
            *ngIf="title.errors?.required">
            Room Title is Required</div>
        <div
            *ngIf="title.errors?.address255">
            Alpha numeric with maximum of 255 characters only
            allowed</div>
    </div>

      </div>
    </div>
    <div class="input-container">
      <div class="header-label">{{(scheduleForm && scheduleForm.value && scheduleForm.value.type == '2' ? 'Teams Link' : 'Password')}}<span class="asterick">*</span></div>
      <div class="w-100">
        <input class="input" *ngIf="scheduleForm && scheduleForm.value && scheduleForm.value.type == '2'" matInput [formControlName]="'password'" [placeholder]="scheduleForm && scheduleForm.value && scheduleForm.value.type == '2' ? 'Teams Link' : 'Enter Here...'" [type]="!toggleVisibility ? 'text' : 'text'">
        <input class="input date-padding" *ngIf="scheduleForm && scheduleForm.value && scheduleForm.value.type != '2'" matInput [formControlName]="'password'" [placeholder]="scheduleForm && scheduleForm.value && scheduleForm.value.type == '2' ? 'Teams Link' : 'Enter Here...'" [type]="!toggleVisibility ? 'text' : 'password'">
        <div class="form-error"
        *ngIf="password1?.invalid && password1?.touched">
        <div
            *ngIf="password1.errors?.required">
            {{scheduleForm && scheduleForm.value && scheduleForm.value.type == '1' ? 'Password' : 'Teams Link'}} is Required</div>
        <div
            *ngIf="password1.errors?.maxlength">
            Maximum of 1000 characters only allowed</div>
    </div>
        <div class="password-type" *ngIf="scheduleForm && scheduleForm.value && scheduleForm.value.type != '2'" mat-icon-button matSuffix style="cursor: pointer;" (click)="toggleVisibility = !toggleVisibility" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="toggleVisibility">
        <mat-icon class="icon-color-1">{{toggleVisibility ? 'visibility_off' : 'visibility'}}</mat-icon>
        </div>
      </div>
    </div>
    <div class="d-flex">
      <div class="input-container">
        <div class="header-label">Start Date Time<span class="asterick">*</span></div>
        <div class="w-100">
          <input class="input date-padding"
            matInput
            [min]="minDate"
            [max]="maxDate"
            onDrop="return false"
            onPaste="return false"
            onkeydown="return false"
            onkeypress="return false"
            [owlDateTime]="sdt"
            [formControlName]="'startTime'"
            placeholder="Select Start Time"
          />
          <mat-icon
            class="date-pick password-type"
            matSuffix
            (click)="dateChange()"
            [owlDateTimeTrigger]="sdt"
            >calendar_today
          </mat-icon>
          <owl-date-time [startAt]="minDate" #sdt></owl-date-time>
          <div class="form-error" *ngIf="startTime?.invalid && startTime?.touched">
            <div *ngIf="startTime?.errors?.required">Start Time is Required</div>
            <div *ngIf="startTime?.errors?.owlDateTimeMax">
                {{startTime?.errors?.owlDateTimeMax?.max ? 'Maximum date should be ' + momentForm(startTime?.errors?.matDatepickerMax.max) : ''}}
            </div>
            <div *ngIf="startTime?.errors?.owlDateTimeMin">
                {{startTime?.errors?.owlDateTimeMin?.min ? 'Start Time should be greater than current Date Time' : ''}}
            </div>
            <div *ngIf="startTime?.errors?.owlDateTimeParse">Invalid Date Format</div>
        </div>

        </div>
      </div>
      <div class="input-container arrowalign">
        <em class="icon-right-next"></em>
      </div>
      <div class="input-container">
        <div class="header-label">End Date Time<span class="asterick">*</span></div>
        <div class="w-100">
          <input class="input date-padding"
            matInput
            [min]="minDate"
            [max]="maxDate"
            onDrop="return false"
            onPaste="return false"
            onkeydown="return false"
            onkeypress="return false"
            [owlDateTime]="edt"
            [formControlName]="'endTime'"
            placeholder="Select End Time"
          />
          <mat-icon
            class="date-pick password-type"
            matSuffix
            (click)="dateChange()"
            [owlDateTimeTrigger]="edt"
            >calendar_today
          </mat-icon>
          <owl-date-time [startAt]="minDate" #edt></owl-date-time>
          <div class="form-error" *ngIf="endTime?.invalid && endTime?.touched">
            <div *ngIf="endTime?.errors?.required">End Time is Required</div>
            <div *ngIf="endTime?.errors?.owlDateTimeMax">
                {{endTime?.errors?.owlDateTimeMax?.max ? 'Maximum date should be ' + momentForm(endTime?.errors?.matDatepickerMax.max) : ''}}
            </div>
            <div *ngIf="endTime?.errors?.owlDateTimeMin">
                {{endTime?.errors?.owlDateTimeMin?.min ? 'End Time should be greater than current Date Time' : ''}}
            </div>
            <div *ngIf="endTime?.errors?.owlDateTimeParse">Invalid Date Format</div>
        </div>
        </div>
      </div>
    </div>
  </form>
    <div class="card-container">
      <div class="header-label">Attendees</div>
      <div class="d-flex justify-content-between flex-wrap">
        <ng-container *ngFor="let attendees of attendeesList">
          <div class="card-details">
            <div class="font-weight-bold text-overflow" *ngIf="attendees.name">
              {{ attendees.name }}
            </div>
            <div
              class="font-weight-bold text-overflow"
              *ngIf="attendees.employee_name"
            >
              {{ attendees.employee_name }}
            </div>
            <div class="text-overflow text-color">{{ attendees.email }}</div>
            <div class="text-overflow text-color">
              Type : {{ attendees.type }}
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="button-conatiner">
      <button mat-raised-button (click)="closePopup()">Cancel</button>
      <button mat-raised-button class="schedule" (click)="scheduleRoom()">
        Schedule
      </button>
    </div>
  </div>
</ng-template>
