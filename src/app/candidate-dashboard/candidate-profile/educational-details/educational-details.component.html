<div class="alert ml-2 mt-2">
  Note:
  <ol>
<li>Please make sure to complete the form and fill the information’s correctly. You will not be able to edit after the shortlisting process.</li>
<li>Please fill all the educational qualifications till date (for example: 10th, 12th, B.Tech & M.Tech if relevant).</li>
</ol>
</div>
<div style="padding: 0 !important;" class="row mainwrapper align-items-center d-flex" [ngClass]="selectedPost ? 'mt-1 ml-2' : 'mt-1 ml-2'">
    <div class="d-flex f_size_16">Please select the profile applying for </div>
    <nz-select style="width: auto !important; min-width: 40% !important;" class="d-flex f_size_16 nzSelect-revamp mw-100 ml-2" (ngModelChange)="detectSelectQualify()" nzAllowClear
    nzShowSearch [(ngModel)]="selectedPost" nzPlaceHolder="Select a profile">
    <nz-option *ngFor="let level of mastersList?.education_master; let j = index"
      [nzDisabled]="false" [nzLabel]="level.label"
      [nzValue]="level.value"></nz-option>
  </nz-select>
</div>
<div *ngIf="selectedPost" class="mainwrapper">
  <!-- <div class="legend">*All fields are mandatory</div> -->
  <div class="header">
    <form #form="ngForm" [formGroup]="educationForm">
      <ng-container *ngIf="eduArr && eduArr.controls" formArrayName="educationArr">
        <div class="grid-wrapper" *ngFor="let item of eduArr.controls; let i = index;" [formGroupName]="i">
          <div style="margin: 1em 0 0 0;" class="form">
            <div class="form-wrapper">
              <div class="flex-column-wrapper">
                    <label class="label">Level<span class="asterick">*</span></label>
                  <div [matTooltip]="i == 0 ? 'SSLC is mandatory' : ''">
                    <!-- <input (focusout)="detectInput(educationForm)" placeholder="Level" formControlName="leveling"
                      type="text" value=""> -->
                    <nz-select *ngIf="i != 1" [ngClass]="i == 0 ? 'disabled' : ''" (ngModelChange)="detectSelectChanges(i)" nzAllowClear
                      nzShowSearch formControlName="leveling" nzPlaceHolder="Select Level">
                      <nz-option *ngFor="let level of levelList; let j = index"
                        [nzDisabled]="(level.education === 'SSLC' || level.education === 'HSC') ? true : false" [nzLabel]="level.label"
                        [nzValue]="level.education"></nz-option>
                    </nz-select>
                    <nz-select *ngIf="i == 1" (ngModelChange)="detectSelectChanges(i)" nzAllowClear
                    nzShowSearch formControlName="leveling" nzPlaceHolder="Select Level">
                    <nz-option *ngFor="let level of levelList; let j = index"
                      [nzDisabled]="(level.education == 'HSC' || level.education == 'Diploma') ? false : true" [nzLabel]="level.label"
                      [nzValue]="level.education"></nz-option>
                  </nz-select>

                  </div>
                <!-- eduArr.controls[i].get('age') -->
                <div class="error"
                  *ngIf="eduArr.controls[i].get('leveling').invalid && eduArr.controls[i].get('leveling').touched">
                  <span *ngIf="eduArr.controls[i].get('leveling').errors?.required">Level is Required</span>
                </div>
              </div>
              <ng-container>
                <div class="flex-column-wrapper">
                      <label class="label">Board/University<span
                          *ngIf="(eduArr.controls[i].get('leveling').value != 'Diploma') && (eduArr.controls[i].get('leveling').value != 'UG') && (eduArr.controls[i].get('leveling').value != 'PG')"
                          class="asterick">*</span></label>
                    <!-- <div [ngClass]="!eduArr.controls[i].get('leveling').value ? 'disabled-1' : ''"> -->
                      <input matInput
                        *ngIf="!eduArr.controls[i].get('leveling').value" [disabled]="true" placeholder="Enter Board/University" type="text">
                      <input matInput
                        *ngIf="(eduArr.controls[i].get('leveling').value == 'Diploma') || (eduArr.controls[i].get('leveling').value == 'UG') || (eduArr.controls[i].get('leveling').value == 'PG')"
                        (focusout)="detectInput(educationForm)" placeholder="Enter Board/University" formControlName="board"
                        type="text">
                      <nz-select
                        *ngIf="(eduArr.controls[i].get('leveling').value == 'SSLC') || (eduArr.controls[i].get('leveling').value == 'HSC')"
                        (ngModelChange)="detectSelectChange()" formControlName="board" nzAllowClear nzShowSearch
                        nzPlaceHolder="Select Board/University">
                        <nz-option *ngFor="let level of boards" [nzLabel]="level.name" [nzValue]="level.name">
                        </nz-option>
                      </nz-select>
                    <!-- </div> -->
                  <div class="error"
                    *ngIf="eduArr.controls[i].get('board').invalid && eduArr.controls[i].get('board').touched">
                    <span *ngIf="eduArr.controls[i].get('board').errors?.required">Board/University is Required</span>
                    <span *ngIf="eduArr.controls[i].get('board').errors?.pattern">Accept only Alphanumeric characters
                      and maximum of 255 characters only allowed</span>
                  </div>
                </div>
                <div class="flex-column-wrapper">
                      <label class="label">Institute<span class="asterick">*</span></label>
                      <input matInput
                        *ngIf="(eduArr.controls[i].get('leveling').value == 'SSLC' || eduArr.controls[i].get('leveling').value == 'HSC')"
                        (focusout)="detectInput(educationForm)" placeholder="Enter Institute" formControlName="institute"
                        type="text">
                      <nz-select
                        *ngIf="(eduArr.controls[i].get('leveling').value != 'SSLC' && eduArr.controls[i].get('leveling').value != 'HSC')"
                        (ngModelChange)="detectSelectChange()" formControlName="institute" nzAllowClear nzShowSearch
                        nzPlaceHolder="Select Institute">
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'UG')">
                          <nz-option *ngFor="let level of ugColleges" [nzLabel]="level.college_name"
                            [nzValue]="level.college_name">
                          </nz-option>
                        </ng-container>
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'PG')">
                          <nz-option *ngFor="let level of pgColleges" [nzLabel]="level.college_name"
                            [nzValue]="level.college_name">
                          </nz-option>
                        </ng-container>
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'Diploma')">
                          <nz-option *ngFor="let level of DiplamoList" [nzLabel]="level.diploma_college"
                            [nzValue]="level.diploma_college">
                          </nz-option>
                        </ng-container>
                      </nz-select>
                  <div class="error"
                    *ngIf="eduArr.controls[i].get('institute').invalid && eduArr.controls[i].get('institute').touched">
                    <span *ngIf="eduArr.controls[i].get('institute').errors?.required">Institute is Required</span>
                  </div>

                </div>
                <div [ngClass]="i == 0 ? 'hide' : ''" class="flex-column-wrapper">
                      <label class="label">Discipline<span class="asterick">*</span></label>
                      <!-- <input (focusout)="detectInput(educationForm)" placeholder="Discipline" formControlName="discipline"
                    type="text" value=""> -->
                      <nz-select (ngModelChange)="detectSelectChange()" formControlName="discipline" nzAllowClear
                        nzShowSearch nzPlaceHolder="Select Discipline">
                        <!-- <nz-option nzLabel="Other" nzValue="Other">Other</nz-option> -->
                        <ng-container
                          *ngIf="(eduArr.controls[i].get('leveling').value != 'HSC' && eduArr.controls[i].get('leveling').value != 'Diploma' && eduArr.controls[i].get('leveling').value != 'UG')">
                          <nz-option *ngFor="let level of pgDisciplines" [nzLabel]="level.pg_discipline"
                            [nzValue]="level.pg_discipline">
                          </nz-option>
                        </ng-container>
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'HSC')">
                          <nz-option *ngFor="let level of HSCDiscipline" [nzLabel]="level.name" [nzValue]="level.value">
                          </nz-option>
                        </ng-container>
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'Diploma')">
                          <nz-option *ngFor="let level of diplamoDiscipline" [nzLabel]="level.diploma_discipline"
                            [nzValue]="level.diploma_discipline">
                          </nz-option>
                        </ng-container>
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'UG')">
                          <nz-option *ngFor="let level of ugDisciplines" [nzLabel]="level.ug_descipline"
                            [nzValue]="level.ug_descipline">
                          </nz-option>
                        </ng-container>

                      </nz-select>
                  <div class="error"
                    *ngIf="eduArr.controls[i].get('discipline').invalid && eduArr.controls[i].get('discipline').touched">
                    <span *ngIf="eduArr.controls[i].get('discipline').errors?.required">Discipline is Required</span>
                  </div>

                </div>
                <div [ngClass]="i == 0 ? 'hide' : ''" class="flex-column-wrapper">
                      <label class="label">Specialization<span
                          *ngIf="(eduArr.controls[i].get('leveling').value != 'HSC') && (eduArr.controls[i].get('leveling').value != 'Diploma')"
                          class="asterick">*</span></label>
                      <input matInput
                        *ngIf="(eduArr.controls[i].get('leveling').value == 'HSC')"
                        (focusout)="detectInput(educationForm)" placeholder="Enter Specialization"
                        formControlName="specification" type="text">
                      <nz-select
                        *ngIf="(eduArr.controls[i].get('leveling').value != 'HSC')"
                        (ngModelChange)="detectSelectChange()" formControlName="specification" nzAllowClear nzShowSearch
                        nzPlaceHolder="Select Specialization">
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'PG')">
                          <nz-option *ngFor="let level of pgSpecialization" [nzLabel]="level.pg_specification"
                            [nzValue]="level.pg_specification">
                          </nz-option>
                        </ng-container>
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'UG')">
                          <nz-option *ngFor="let level of ugSpecialization" [nzLabel]="level.ug_specification"
                            [nzValue]="level.ug_specification">
                          </nz-option>
                        </ng-container>
                        <ng-container *ngIf="(eduArr.controls[i].get('leveling').value == 'Diploma')">
                          <nz-option *ngFor="let level of diplamoSpecialization" [nzLabel]="level.value"
                            [nzValue]="level.value">
                          </nz-option>
                        </ng-container>

                      </nz-select>
                  <div class="error"
                    *ngIf="eduArr.controls[i].get('specification').invalid && eduArr.controls[i].get('specification').touched">
                    <span *ngIf="eduArr.controls[i].get('specification').errors?.required">Specialization is
                      Required</span>
                  </div>

                </div>
                <div class="flex-column-wrapper">
                      <label class="label">Year of Passing<span class="asterick">*</span></label>
                      <nz-month-picker (ngModelChange)="detectSelectChange()" formControlName="passedYear"
                        [nzDisabledDate]="disabledprevious" [nzFormat]="monthFormat" nzPlaceHolder="Date of passing">
                      </nz-month-picker>
                  <div class="error"
                    *ngIf="eduArr.controls[i].get('passedYear').invalid && eduArr.controls[i].get('passedYear').touched">
                    <span *ngIf="eduArr.controls[i].get('passedYear').errors?.required">Date of passing is
                      Required</span>
                  </div>

                </div>
                <div class="flex-column-wrapper">
                      <label class="label">No. of Backlogs<span class="asterick">*</span> (Enter “0” if none)</label>
                      <input matInput (focusout)="detectInput(educationForm)" placeholder="Enter Backlogs" formControlName="backlogs"
                        type="text">
                  <div class="error"
                    *ngIf="eduArr.controls[i].get('backlogs').invalid && eduArr.controls[i].get('backlogs').touched">
                    <span *ngIf="eduArr.controls[i].get('backlogs').errors?.required">Backlogs is required.</span>
                    <span *ngIf="eduArr.controls[i].get('backlogs').errors?.pattern">Accept Numbers only and Maximum of
                      2 digits only Allowed</span>
                  </div>

                </div>

                <div class="flex-column-wrapper">
                      <label class="label">Percentage<span class="asterick">*</span></label>
                      <input matInput (focusout)="detectInput(educationForm)" placeholder="Enter Percentage"
                        formControlName="percentage" type="text">
                  <div class="error"
                    *ngIf="eduArr.controls[i].get('percentage').invalid && eduArr.controls[i].get('percentage').touched">
                    <span *ngIf="eduArr.controls[i].get('percentage').errors?.required">Percentage is Required</span>
                    <span *ngIf="eduArr.controls[i].get('percentage').errors?.pattern">Percentage should be in the range of 10 to 100</span>
                  </div>

                </div>
              </ng-container>
            </div>
          </div>

          <ng-container *ngIf="(eduArr.controls.length !== 1 && i !== 0) && ((i != 1 && eduArr.controls.length > 2) || (i == 1 && eduArr.controls.length == 2))">
          <div class="remove-wrapper">
            <div (click)="removeEducationForm(i)" matTooltip="Remove" class="remove">
                <i class="material-icons material-icons-outlined">
                    remove_circle_outline
                    </i>
            </div>
            </div>
            </ng-container>
        </div>
        <div *ngIf="eduArr && eduArr.controls && eduArr.controls.length <= 6" class="row-wrapper mt-3 ml-4">
              <button class="add-button" mat-raised-button type="button" (click)="addEducationForm1()">+ Add</button>
      </div>
      </ng-container>

    </form>

    <div class="submit-button-wrapper">
      <button class="submit btn-margin-space" (click)="onSubmit(educationForm.value)" mat-raised-button
        type="submit">Continue</button>

      <button class="cancel-btn" (click)="cancel()" mat-raised-button type="button">Cancel</button>

    </div>

  </div>
