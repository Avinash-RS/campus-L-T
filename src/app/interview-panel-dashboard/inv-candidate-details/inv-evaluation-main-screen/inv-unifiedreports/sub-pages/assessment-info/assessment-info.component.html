<section class="assessmentArea">
  <div class="assessmentHeaderinfo">
    <div class="heading6">Assessment Details</div>
  </div>

  <div class="assessmentInfoarea">
    <ng-container *ngIf="assessmentsList && assessmentsList.length > 0">
      <ng-container
        *ngFor="
          let assessment of assessmentsList;
          let i = index;
          first as isFirst
        "
      >
        <mat-expansion-panel [expanded]="false">
          <mat-expansion-panel-header>
            <div class="expandheaderArea">
              <div>
                <em class="icon-Assessment"></em>
                <span
                  >Test Name:
                  <span>{{ assessment.assessmentname }}</span>
                </span>
              </div>
              <div>
                <em class="icon-Booked"></em>
                <span
                  >Test Taken on:
                  <span>{{
                    assessment.assessmentdate
                      ? momentForm(assessment.assessmentdate)
                      : ""
                  }}</span>
                </span>
              </div>
              <div>
                <em class="icon-SpeedoMeter"></em>
                <span
                  >Score:
                  <span
                    [ngClass]="{
                      warningColor: assessment.percentageScore < 40,
                      WarnColor:
                        assessment.percentageScore >= 40 &&
                        assessment.percentageScore < 80,
                      successColor: assessment.percentageScore >= 80
                    }"
                    >{{ assessment.score }}/{{ assessment.maxscore }}</span
                  >
                </span>
              </div>
              <div>
                <em class="icon-Like"></em>
                <span
                  >Credibility Index:
                  <span
                    [ngClass]="{
                      warningColor: assessment.percentageScore < 40,
                      WarnColor:
                        assessment.percentageScore >= 40 &&
                        assessment.percentageScore < 80,
                      successColor: assessment.percentageScore >= 80
                    }"
                    >{{ getCredibility(assessment.percentageScore) }}</span
                  >
                </span>
              </div>
            </div>
          </mat-expansion-panel-header>

          <div class="expandContentArea">
            <div class="ContentInfoDetails">
              <div>
                Test Time
                <span>{{ assessment.duration }}<span>/Min</span></span>
              </div>
              <div>
                Test Taken
                <span>{{ assessment.timetaken }}<span>/Min</span></span>
              </div>
              <div>
                Marks Scored
                <span
                  >{{ assessment.score
                  }}<span>/{{ assessment.maxscore }}</span></span
                >
              </div>
              <div>
                Proctoring
                <span
                  >{{ assessment.proctored ? "Yes" : "No"
                  }}<span *ngIf="assessment.proctored" class="warningColor"
                    >View Details</span
                  ></span
                >
              </div>
              <div class="primaryInfo">
                Completion
                <span class="successColor"
                  ><em class="icon-checked"></em
                  ><span>{{ assessment.compilation }}</span></span
                >
              </div>
            </div>
            <div class="ContentInfoSummary">
              <div class="assessmentHeaderinfo">
                <div class="Summaryhtxt">
                  Sectional Summary
                  <!-- <span class="primaryClick"><em class="icon-right-next"></em> View Questionwise Analysis</span> -->
                </div>
              </div>
              <div class="SummaryInfoArea">
                <table
                  class="summaryTable"
                  border="0"
                  cellpadding="0"
                  cellspacing="0"
                >
                  <thead>
                    <tr>
                      <th>Section Name</th>
                      <th>Questions Attempted</th>
                      <!-- <th>Attempted</th> -->
                      <th>Score Obtained</th>
                      <th>Percentage</th>
                      <th>Time Taken</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container
                      *ngIf="
                        assessment.section && assessment.section.length > 0
                      "
                    >
                      <tr
                        *ngFor="
                          let section of assessment.section;
                          let j = index
                        "
                      >
                        <td>{{ section.secname }}</td>
                        <td>
                          <div
                            class="progressbar color-bluebar"
                            [ngStyle]="{
                              width:
                                (section.attendedquestions /
                                  section.overallquestions) *
                                  100 +
                                '%'
                            }"
                          ></div>
                          <div class="progressdata">
                            <span>{{ section.attendedquestions }}</span
                            >/{{ section.overallquestions }}
                          </div>
                        </td>
                        <!-- <td>
                                            <div class="progressbar color-bluebar" [ngStyle]="{'width':(section.attempt/section.overallattempt) * 100 + '%'}" ></div>
                                            <div class="progressdata"><span>{{section.attempt}}</span>/{{section.overallattempt}}</div>
                                        </td> -->
                        <td>
                          <div
                            class="progressbar color-pinkbar"
                            [ngStyle]="{
                              width:
                                (section.score / section.overallscore) * 100 +
                                '%'
                            }"
                          ></div>
                          <div class="progressdata">
                            <span>{{ section.score }}</span>
                          </div>
                        </td>
                        <td>
                          <div
                            class="progressbar color-greenbar"
                            [ngStyle]="{
                              width: (section.accuracy / 100) * 100 + '%'
                            }"
                          ></div>
                          <div class="progressdata">
                            <span>{{ section.accuracy }}%</span>
                          </div>
                        </td>
                        <td>
                          <div
                            class="progressbar color-yellowbar"
                            [ngStyle]="{
                              width:
                                (section.timetaken / section.overallduration) *
                                  100 +
                                '%'
                            }"
                          ></div>
                          <div class="progressdata">
                            <span>{{ section.timetaken }}</span
                            >/{{ section.overallduration }} mins
                          </div>
                        </td>
                        <td>
                          <div class="likeSec">
                            <em
                              [ngClass]="
                                section.accuracy < 40
                                  ? 'icon-Dislike'
                                  : section.accuracy >= 40 &&
                                    section.accuracy < 80
                                  ? 'icon-Like average-color'
                                  : 'icon-Like'
                              "
                            ></em>
                          </div>
                        </td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </mat-expansion-panel>
      </ng-container>
    </ng-container>
  </div>
</section>
